---
layout : post
title: Redis命令大全
category : Redis
duoshuo: true
math: true
date : 2015-1-11
---

<!-- more -->

Redis是一个高性能的key-value内存数据库，官网：[http://redis.io/](http://redis.io/)。

##String相关操作
>
- set/get 赋值和取值：
- append：如果 key 已经存在，并且值为字符串，那么这个命令会把 value 追加到原来值（value）的结尾。 如果 key 不存在，那么它将首先创建一个空字符串的key，再执行追加操作。返回追加后的结果。
- decr：对key对应的数字做减1操作。这个操作最大支持在64位有符号的整型数字。返回减一后的值。
- decrby：将key对应的数字减去指定的值。返回减后的结果。
- setbit/getbit 对字符串指定offset处的bit进行赋值和取值。
- setrange/getrange setrange这个命令的作用是覆盖key对应的string的一部分，从指定的offset处开始，覆盖value的长度。 getrange在小于2.0的Redis版本中叫SUBSTR。 返回key对应的字符串value的子串，这个子串是由start和end位移决定的（两者都在string内）。可以用负的位移来表示从string尾部开始数的下标。所以-1就是最后一个字符，-2就是倒数第二个，以此类推。
{% highlight redis %}
redis> SET mykey "This is a string"
OK
redis> GETRANGE mykey 0 3
"This"
redis> GETRANGE mykey -3 -1
"ing"
redis> GETRANGE mykey 0 -1
"This is a string"
redis> GETRANGE mykey 10 100
"string"
{% endhighlight %}
- getset 自动将key对应到value并且返回原来key对应的value。如果key存在但是对应的value不是字符串，就返回错误。
GETSET可以和INCR一起使用实现支持重置的计数功能。举个例子：每当有事件发生的时候，一段程序都会调用INCR给key mycounter加1，
但是有时我们需要获取计数器的值，并且自动将其重置为0。这可以通过GETSET mycounter "0"来实现：
{% highlight redis %}
redis> INCR mycounter
(integer) 1
redis> GETSET mycounter "0"
"1"
redis> GET mycounter
"0" 
{% endhighlight %}
- incr 对key对应的数字做加1操作。
- incrby 对key对应的数字做加上指定的值。
- incrbyfloat 对key对应的数字做加上指定的浮点型值。
- mset/mget   对应给定的keys到他们相应的values上。  返回所有指定的key的value。
{% highlight redis %}
redis> MSET key1 "Hello" key2 "World"
OK
redis> GET key1
"Hello"
redis> GET key2
"World"
redis> SET key1 "Hello"
OK
redis> SET key2 "World"
OK
redis> MGET key1 key2 nonexisting
1) "Hello"
2) "World"
3) (nil)
{% endhighlight %}
- msetnx 对应给定的keys到他们相应的values上。只要有一个key已经存在，MSETNX一个操作都不会执行。 由于这种特性，MSETNX可以实现要么所有的操作都成功，要么一个都不执行，这样可以用来设置不同的key，来表示一个唯一的对象的不同字段。
{% highlight redis %}
redis> MSETNX key1 "Hello" key2 "there"
(integer) 1
redis> MSETNX key2 "there" key3 "world"
(integer) 0
redis> MGET key1 key2 key3
1) "Hello"
2) "there"
3) (nil)
{% endhighlight %}
- setex 设置key对应字符串value，并且设置key在给定的seconds时间之后超时过期。
- strlen 返回key的string类型value的长度。
